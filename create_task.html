<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<head>
    <title>Backup Jobs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css"
          integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
    <!--    <link rel="stylesheet" type="text/css" href="/static/css/base.css"/>-->
    <link/>
</head>
<body>

<form method="post">
    备份类型？
    <br/>
    <br/>
    <label><input name="backupType" type="radio" value="1"/>备份所有(增量) </label>
    <label><input name="backupType" type="radio" value="2"/>备份某一天(增量) </label>
    <br/>
    <br/>
    <div hidden="true" id="backupDate">
        <label>备份日期：</label><input name="backupDate" type="date" value=""/>
    </div
    </br>
    </br>
    <div>
        <label>备份ceph：</label><input id="backupCeph" name="backupCeph" type="text" readonly="true"/>
    </div>
    </br>
    </br>
    <button type="submit" name="submit" onclick="create_task()">提交</button>
    <button type="button" name="cancel" onclick="toIndex()">返回</button>

</form>

<!--<div id="pager">-->
<!--</div>-->
</body>
</html>
<script src="jquery-3.4.1.js"></script>
<script type="text/javascript">

     $(function () {
        var backupCeph = getQueryVariable("backupCeph");
         $("#backupCeph").val(backupCeph);
    });

    function toIndex(){
        window.location.href = './index.html';
    }
    $(function () {
        $(":radio").click(function () {
            var oDiv = document.getElementById("backupDate");
            if ($(this).val() == 2) {
                oDiv.hidden = false
            } else {
                oDiv.hidden = true
            }

        });
    });

    function create_task(){
        $.ajax({
            url:"./s3backup/backup/createBackupTask",
            type:"post",
            data: $('form').serialize(),
            success:function(res){
                location.href = "./index.html";
            },
            error:function(e){
                alert("错误！！");
            }
        });
    }

    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1);
           var vars = query.split("&");
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=");
                   if(pair[0] == variable){return pair[1];}
           }
           return null;
    }
    // $(function () {
    //     $('form').on('submit', function (e) {
    //
    //         $.ajax({
    //             type: 'post',
    //             url: './s3backup/backup/createBackupTask',
    //             data: $('form').serialize(),
    //             success: function () {
    //                 window.location.href = './index.html';
    //             }
    //         });
    //
    //     });
    //
    // });

</script>